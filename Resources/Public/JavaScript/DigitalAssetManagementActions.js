/*
 * This file is part of the TYPO3 CMS project.
 *
 * It is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License, either version 2
 * of the License, or any later version.
 *
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 *
 * The TYPO3 project - inspiring people to share!
 */
define(["require","exports","jquery","bootstrap"],function(e,t,n){"use strict";var a=function(){function e(){}return e.init=function(){var t=e;console.log(top.TYPO3.lang["localize.wizard.header"]),console.log(top.TYPO3.lang["mlang.lablel.modified"]),console.log("DigitalAssetManagement.init"),t.renderBreadcrumb("/"),t.request("getContent","/"),n(".digital-asset-management").on("click",".folder-action",function(){var e=n(this).data("method"),a=n(this).data("parameter");console.log("method: "+e+", par: "+a),t.request(e,a)})},e.renderError=function(e){n(".errorlog").html(e.responseText)},e.renderContent=function(t){var a=e;if(t&&t.request&&n(".errorlog").html(t.request+t.response),t.getContent&&(t.getContent.files||t.getContent.folder)){for(var r="",l=0;l<t.getContent.folders.length;l++){var i=t.getContent.folders[l];console.log(i),i.mimetype="folder",r+=a.replaceTemplateVars(a.folderPartial,i)}n(".folders").html(r),r="";for(l=0;l<t.getContent.files.length;l++){var o=t.getContent.files[l];console.log(o),o.mimetype=o.mimetype.replace("/"," "),r+=a.replaceTemplateVars(a.filePartial,o)}n(".files").html(r)}},e.renderBreadcrumb=function(e){for(var t=e.split("/"),a="",r="",l=0;l<t.length;l++){var i=t[l];0===l?r="todo Storagename":r+="/"+i[l],a+=this.replaceTemplateVars(this.breadcrumbPartial,{pathsegment:r,part:i[l]})}n(".breadcrumb").html(a)},e.request=function(t,a){var r=e,l={};l[t]=a,n.getJSON(TYPO3.settings.ajaxUrls.dam_request,l).done(function(e){switch(t){case"getContent":console.log(e),r.renderBreadcrumb(a),r.renderContent(e);break;default:top.TYPO3.Notification.warning("Request failed","Unknown method: "+t)}}).fail(function(e){console.log("DigitalAssetManagement request promise fail "+JSON.stringify(e)),top.TYPO3.Notification.warning("Request failed","Content can not be displayed. "+e.readyState),r.renderError(e)})},e.replaceTemplateVars=function(e,t){return e.replace(/{(\w*)}/g,function(e,n){return n.indexOf("{lll:")?top.TYPO3.lang[n.replace(/lll:/,"")]:t.hasOwnProperty(n)?t[n]:" -missing prop:"+n+"-"})},e.folderPartial='    <div class="card folder-action d-inline-block {mimetype}" data-method="getContent" data-parameter="{identifier}" style="width: 180px;">\n   <div class="icon folder-icon icon-apps-filetree-folder"></div>   <div class="card-body">\n   <h5 class="card-title">{name}</h5>\n    <p class="card-text">&nbsp;</p>\n    <a href="#" class="btn btn-primary">Go somewhere</a>\n    </div>\n  </div>\n',e.filePartial='<div class="card d-inline-block {mimetype}" style="width: 180px;">\n    <img class="card-img-top" src="PlaceholderImage" data-src="{uid}" width="180" height="120"/>\n    <div class="card-body">\n    <h5 class="card-title">{name}</h5>\n    <p class="card-text">{lll:mlang.lablel.filesize}: {size} <br>{lll:mlang.lablel.modified}: {uid}</p>\n    <a href="#" class="btn btn-primary">Go somewhere</a>\n    </div>\n  </div>\n',e.breadcrumbPartial='&nbsp;&gt;&nbsp;<span class="folder-action" data-method="getContent" data-parameter="{pathsegment}">{part}</span>',e}();return n(a.init),TYPO3.DigitalAssetManagementActions=a,a});