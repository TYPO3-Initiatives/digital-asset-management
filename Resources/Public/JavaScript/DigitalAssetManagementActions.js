/*
 * This file is part of the TYPO3 CMS project.
 *
 * It is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License, either version 2
 * of the License, or any later version.
 *
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 *
 * The TYPO3 project - inspiring people to share!
 */
define(["require","exports","jquery","TYPO3/CMS/Backend/Icons","bootstrap"],function(e,t,n,r){"use strict";var a=function(){function e(){}return e.init=function(){var t=e;console.log(top.TYPO3.lang["localize.wizard.header"]),console.log(top.TYPO3.lang.mlang_tabs_tab),console.log("DigitalAssetManagement.init"),t.renderBreadcrumb("/"),t.request("getContent","/"),n(".digital-asset-management").on("click",".card",function(){var e=n(this).data("method"),r=n(this).data("parameter");console.log("methiod: "+e+", par: "+r),t.request(e,r)})},e.renderError=function(e){n(".errorlog").html(e.responseText)},e.renderContent=function(e){if(e&&e.request&&n(".errorlog").html(e.request+e.response),e.getContent&&(e.getContent.files||e.getContent.folder)){for(var t="",a=0;a<e.getContent.folders.length;a++){var o=e.getContent.folders[a];console.log(o),r.getIcon("apps-filetree-folder","large").done(function(e){n(".folder-icon").html(e)}),t+='   <div class="card d-inline-block" data-method="getContent" data-parameter="'+o.identifier+'" style="width: 180px;">\n   <div class="folder-icon">      <img class="card-img-top" src="" data-src="'+o.uid+'" width="180" height="120"/>\n   </div>   <div class="card-body">\n   <h5 class="card-title">'+o.name+'</h5>\n    <p class="card-text">&nbsp;</p>\n    <a href="#" class="btn btn-primary">Go somewhere</a>\n    </div>\n  </div>\n'}n(".folders").html(t),t="";for(a=0;a<e.getContent.files.length;a++){var i=e.getContent.files[a];console.log(i),t+='<div class="card d-inline-block" style="width: 180px;">\n    <img class="card-img-top" src="PlaceholderImage" data-src="'+i.uid+'" width="180" height="120"/>\n    <div class="card-body">\n    <h5 class="card-title">'+i.name+'</h5>\n    <p class="card-text">Size: '+i.size+" <br>Modified: "+i.uid+' </p>\n    <a href="#" class="btn btn-primary">Go somewhere</a>\n    </div>\n  </div>\n'}n(".files").html(t)}},e.renderBreadcrumb=function(e){for(var t=e.split("/"),r="",a=0;a<t.length;a++){var o=t[a];r+=' / <span data-method="getContent" data-parameter="'+o+'">'+o+"</span>"}n(".breadcrumb").html(r)},e.request=function(t,r){var a=e,o={};o[t]=r,n.getJSON(TYPO3.settings.ajaxUrls.dam_request,o).done(function(e){switch(t){case"getContent":console.log(e),a.renderBreadcrumb(r),a.renderContent(e);break;default:top.TYPO3.Notification.warning("Request failed","Unknown method: "+t)}}).fail(function(e){console.log("DigitalAssetManagement request promise fail "+JSON.stringify(e)),top.TYPO3.Notification.warning("Request failed","Content can not be displayed. "+e.readyState),a.renderError(e)})},e}();return n(a.init),TYPO3.DigitalAssetManagementActions=a,a});